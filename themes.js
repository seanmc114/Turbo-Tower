// JC Tower Compendium vocab (ES/FR/DE/EN)
// Prompts are in English; answers are in the chosen language.
// Accents not required; √± counts as n.

export const THEME_LIST = [
  { id:"family", title:"Family", emoji:"üë®‚Äçüë©‚Äçüëß‚Äçüë¶" },
  { id:"daily", title:"Daily Routine", emoji:"‚è∞" },
  { id:"school", title:"School", emoji:"üè´" },
  { id:"yourself", title:"Yourself", emoji:"üôã" },
  { id:"barrio", title:"Barrio", emoji:"üèôÔ∏è" },
  { id:"amigos", title:"Friends / Amigos", emoji:"üßë‚Äçü§ù‚Äçüßë" },
  { id:"comida", title:"Comida", emoji:"üçΩÔ∏è" },
  { id:"bebida", title:"Bebida", emoji:"ü•§" },
  { id:"uniforme", title:"Uniforme escolar", emoji:"üëî" },
  { id:"casa", title:"Casa", emoji:"üè†" },
  { id:"tiempo", title:"El tiempo", emoji:"üå¶Ô∏è" },
  { id:"hora", title:"La hora", emoji:"üïí" },
  { id:"direcciones", title:"Direcciones", emoji:"üß≠" },
  { id:"asignaturas", title:"Asignaturas", emoji:"üìö" },
];

export function getThemeTitle(themeId){
  return THEME_LIST.find(t=>t.id===themeId)?.title || themeId;
}

function coverSvg(emoji, a="#00d084", b="#ffd166", c="#6a55ff"){
  const svg = `<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800">
    <defs>
      <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0" stop-color="${a}"/>
        <stop offset="1" stop-color="${b}"/>
      </linearGradient>
    </defs>
    <rect width="1200" height="800" fill="url(#g)"/>
    <circle cx="980" cy="150" r="220" fill="${c}" opacity="0.35"/>
    <circle cx="210" cy="650" r="280" fill="#fff" opacity="0.20"/>
    <text x="70" y="640" font-size="520" font-family="system-ui" opacity="0.92">${emoji}</text>
  </svg>`;
  return `url("data:image/svg+xml;utf8,${encodeURIComponent(svg)}")`;
}

export function tileCoverCss(themeId){
  const emoji = THEME_LIST.find(t=>t.id===themeId)?.emoji || "üßä";
  const presets = {
    family: coverSvg(emoji, "#00d084", "#ffd166", "#6a55ff"),
    daily: coverSvg(emoji, "#ff4d6d", "#ffd166", "#00d084"),
    school: coverSvg(emoji, "#00c2ff", "#ffd166", "#ff4d6d"),
    yourself: coverSvg(emoji, "#6a55ff", "#00d084", "#ffd166"),
    barrio: coverSvg(emoji, "#00d084", "#00c2ff", "#ffd166"),
    amigos: coverSvg(emoji, "#ffd166", "#00d084", "#ff4d6d"),
    comida: coverSvg(emoji, "#ff7a18", "#ffd166", "#00d084"),
    bebida: coverSvg(emoji, "#00c2ff", "#6a55ff", "#ffd166"),
    uniforme: coverSvg(emoji, "#00d084", "#ffd166", "#00c2ff"),
    casa: coverSvg(emoji, "#6a55ff", "#ffd166", "#00d084"),
    tiempo: coverSvg(emoji, "#00c2ff", "#00d084", "#ffd166"),
    hora: coverSvg(emoji, "#ffd166", "#6a55ff", "#00d084"),
    direcciones: coverSvg(emoji, "#00d084", "#ffd166", "#ff4d6d"),
    asignaturas: coverSvg(emoji, "#ff4d6d", "#00c2ff", "#ffd166"),
  };
  return presets[themeId] || coverSvg(emoji);
}

// ---------- Data format ----------
// Each item: { lvl: 1..10, en:"", es:[""], fr:[""], de:[""], enAns:[""] }
// For English mode we accept enAns (usually same as en).

const I = (lvl, en, es, fr, de, enAns=null)=> ({
  lvl, en,
  es: Array.isArray(es)?es:[es],
  fr: Array.isArray(fr)?fr:[fr],
  de: Array.isArray(de)?de:[de],
  enAns: Array.isArray(enAns)?enAns:(enAns? [enAns] : [en]),
});

// ---------------- FAMILY (includes your ES answers; FR/DE equivalents added) ----------------
const FAMILY = [
  // Level 1 (core)
  I(1,"mother",["madre","mam√°"],["m√®re","maman"],["Mutter"],["mother"]),
  I(1,"father",["padre","pap√°"],["p√®re","papa"],["Vater"],["father"]),
  I(1,"brother","hermano","fr√®re","Bruder","brother"),
  I(1,"sister","hermana","s≈ìur","Schwester","sister"),
  I(1,"parents","padres","parents","Eltern","parents"),
  I(1,"family","familia","famille","Familie","family"),
  I(1,"son","hijo","fils","Sohn","son"),
  I(1,"daughter","hija","fille","Tochter","daughter"),
  I(1,"children","hijos","enfants","Kinder","children"),
  I(1,"grandmother","abuela","grand-m√®re","Gro√ümutter","grandmother"),
  I(1,"grandfather","abuelo","grand-p√®re","Gro√üvater","grandfather"),
  I(1,"grandparents","abuelos","grands-parents","Gro√üeltern","grandparents"),

  // Level 2 (extended)
  I(2,"uncle","t√≠o","oncle","Onkel","uncle"),
  I(2,"aunt","t√≠a","tante","Tante","aunt"),
  I(2,"cousin (male)","primo","cousin","Cousin","cousin"),
  I(2,"cousin (female)","prima","cousine","Cousine","cousin"),
  I(2,"nephew","sobrino","neveu","Neffe","nephew"),
  I(2,"niece","sobrina","ni√®ce","Nichte","niece"),
  I(2,"husband",["marido","esposo"],"mari","Ehemann","husband"),
  I(2,"wife",["mujer","esposa"],"femme","Ehefrau","wife"),
  I(2,"couple","pareja","couple","Paar","couple"),
  I(2,"relative",["pariente","familiar"],"parent","Verwandter","relative"),
  I(2,"stepfather","padrastro","beau-p√®re","Stiefvater","stepfather"),
  I(2,"stepmother","madrastra","belle-m√®re","Stiefmutter","stepmother"),

  // Level 3+
  I(3,"stepson","hijastro","beau-fils","Stiefsohn","stepson"),
  I(3,"stepdaughter","hijastra","belle-fille","Stieftochter","stepdaughter"),
  I(3,"half-brother",["medio hermano","hermanastro"],"demi-fr√®re","Halbbruder","half-brother"),
  I(3,"half-sister",["media hermana","hermanastra"],"demi-s≈ìur","Halbschwester","half-sister"),
  I(3,"only child",["hijo √∫nico","hija √∫nica"],"enfant unique","Einzelkind","only child"),
  I(3,"twins","gemelos","jumeaux","Zwillinge","twins"),
  I(3,"single-parent family","familia monoparental","famille monoparentale","alleinerziehende Familie","single-parent family"),
  I(3,"to get married","casarse","se marier","heiraten","to get married"),
  I(3,"wedding","boda","mariage","Hochzeit","wedding"),
  I(3,"divorce","divorcio","divorce","Scheidung","divorce"),
  I(3,"to separate","separarse","se s√©parer","sich trennen","to separate"),
  I(3,"to live together",["vivir juntos","convivir"],"vivre ensemble","zusammenleben","to live together"),

  I(4,"to look after","cuidar","s'occuper de","sich k√ºmmern um","to look after"),
  I(4,"household chores","tareas dom√©sticas","t√¢ches m√©nag√®res","Hausarbeit","household chores"),
  I(4,"to argue","discutir","se disputer","streiten","to argue"),
  I(4,"to get along","llevarse bien","bien s'entendre","sich gut verstehen","to get along"),
  I(4,"relationship","relaci√≥n","relation","Beziehung","relationship"),
  I(4,"to date","salir con","sortir avec","ausgehen mit","to date"),

  I(5,"engaged",["comprometido","prometido"],"fianc√©","verlobt","engaged"),
  I(5,"fianc√©","prometido","fianc√©","Verlobter","fianc√©"),
  I(5,"fianc√©e","prometida","fianc√©e","Verlobte","fianc√©e"),
  I(5,"to propose",["pedir matrimonio","proponer matrimonio"],"demander en mariage","einen Antrag machen","to propose"),
  I(5,"to break up","romper","rompre","sich trennen","to break up"),
  I(5,"to forgive","perdonar","pardonner","verzeihen","to forgive"),

  I(6,"in-laws","suegros","beaux-parents","Schwiegereltern","in-laws"),
  I(6,"mother-in-law","suegra","belle-m√®re","Schwiegermutter","mother-in-law"),
  I(6,"father-in-law","suegro","beau-p√®re","Schwiegervater","father-in-law"),
  I(6,"brother-in-law","cu√±ado","beau-fr√®re","Schwager","brother-in-law"),
  I(6,"sister-in-law","cu√±ada","belle-s≈ìur","Schw√§gerin","sister-in-law"),
  I(6,"to adopt","adoptar","adopter","adoptieren","to adopt"),

  I(7,"family tree","√°rbol geneal√≥gico","arbre g√©n√©alogique","Stammbaum","family tree"),
  I(7,"to inherit","heredar","h√©riter","erben","to inherit"),
  I(7,"inheritance","herencia","h√©ritage","Erbe","inheritance"),
  I(7,"to take after","parecerse a","ressembler √†","√§hneln","to take after"),
  I(7,"to depend on","depender de","d√©pendre de","abh√§ngen von","to depend on"),
  I(7,"generation","generaci√≥n","g√©n√©ration","Generation","generation"),

  I(8,"to set rules",["poner reglas","establecer reglas"],"fixer des r√®gles","Regeln aufstellen","to set rules"),
  I(8,"to allow","permitir","permettre","erlauben","to allow"),
  I(8,"to forbid","prohibir","interdire","verbieten","to forbid"),
  I(8,"to punish","castigar","punir","bestrafen","to punish"),
  I(8,"to behave","portarse","se comporter","sich benehmen","to behave"),
  I(8,"to be grounded","estar castigado","√™tre puni","Hausarrest haben","to be grounded"),

  I(9,"support network","red de apoyo","r√©seau de soutien","Unterst√ºtzungsnetz","support network"),
  I(9,"to seek help","buscar ayuda","chercher de l'aide","Hilfe suchen","to seek help"),
  I(9,"to cope","afrontar","faire face","bew√§ltigen","to cope"),
  I(9,"to overcome","superar","surmonter","√ºberwinden","to overcome"),
  I(9,"to set boundaries",["poner l√≠mites","establecer l√≠mites"],"fixer des limites","Grenzen setzen","to set boundaries"),
  I(9,"mutual respect","respeto mutuo","respect mutuel","gegenseitiger Respekt","mutual respect"),

  I(10,"family breakdown","ruptura familiar","rupture familiale","Familienzerfall","family breakdown"),
  I(10,"dysfunctional family","familia disfuncional","famille dysfonctionnelle","dysfunktionale Familie","dysfunctional family"),
  I(10,"to mediate","mediar","m√©diatiser","vermitteln","to mediate"),
  I(10,"mediation","mediaci√≥n","m√©diation","Mediation","mediation"),
  I(10,"to maintain contact","mantener el contacto","maintenir le contact","Kontakt halten","to maintain contact"),
  I(10,"to cut ties","romper lazos","couper les ponts","Kontakte abbrechen","to cut ties"),
];

// ---------------- OTHER THEMES (10 steps each; common ‚Üí harder) ----------------
const DAILY = [
  I(1,"to wake up","despertarse","se r√©veiller","aufwachen"),
  I(1,"to get up","levantarse","se lever","aufstehen"),
  I(1,"breakfast","desayuno","petit-d√©jeuner","Fr√ºhst√ºck"),
  I(1,"to go to school","ir al colegio","aller √† l'√©cole","zur Schule gehen"),
  I(1,"homework","los deberes","les devoirs","Hausaufgaben"),
  I(1,"to go to bed","acostarse","se coucher","ins Bett gehen"),

  I(2,"to have a shower","ducharse","prendre une douche","duschen"),
  I(2,"to brush teeth","lavarse los dientes","se brosser les dents","Z√§hne putzen"),
  I(2,"to get dressed","vestirse","s'habiller","sich anziehen"),
  I(2,"to take the bus","coger el autob√∫s","prendre le bus","den Bus nehmen"),
  I(2,"to arrive","llegar","arriver","ankommen"),
  I(2,"to be late","llegar tarde","√™tre en retard","zu sp√§t sein"),

  I(3,"to study","estudiar","√©tudier","lernen"),
  I(3,"to revise","repasar","r√©viser","wiederholen"),
  I(3,"to relax","relajarse","se d√©tendre","sich entspannen"),
  I(3,"to meet friends","quedar con amigos","retrouver des amis","Freunde treffen"),
  I(3,"to help at home","ayudar en casa","aider √† la maison","zu Hause helfen"),
  I(3,"routine","la rutina","la routine","Routine"),

  I(4,"to tidy my room","ordenar mi habitaci√≥n","ranger ma chambre","mein Zimmer aufr√§umen"),
  I(4,"to do chores","hacer tareas","faire des t√¢ches m√©nag√®res","Hausarbeit machen"),
  I(4,"to cook","cocinar","cuisiner","kochen"),
  I(4,"to do sport","hacer deporte","faire du sport","Sport machen"),
  I(4,"to rest","descansar","se reposer","sich ausruhen"),
  I(4,"schedule","el horario","l'emploi du temps","Stundenplan"),

  I(5,"to hurry up","darse prisa","se d√©p√™cher","sich beeilen"),
  I(5,"to set an alarm","poner la alarma","mettre le r√©veil","den Wecker stellen"),
  I(5,"to take a break","tomar un descanso","faire une pause","eine Pause machen"),
  I(5,"to listen to music","escuchar m√∫sica","√©couter de la musique","Musik h√∂ren"),
  I(5,"to watch TV","ver la tele","regarder la t√©l√©","fernsehen"),
  I(5,"to practise","practicar","pratiquer","√ºben"),

  I(6,"to clean","limpiar","nettoyer","putzen"),
  I(6,"to wash dishes","lavar los platos","faire la vaisselle","abwaschen"),
  I(6,"to take out rubbish","sacar la basura","sortir la poubelle","den M√ºll rausbringen"),
  I(6,"to fold clothes","doblar la ropa","plier les v√™tements","Kleidung zusammenlegen"),
  I(6,"to iron","planchar","repasser","b√ºgeln"),
  I(6,"to walk the dog","pasear al perro","promener le chien","den Hund ausf√ºhren"),

  I(7,"to be tired","estar cansado","√™tre fatigu√©","m√ºde sein"),
  I(7,"to be stressed","estar estresado","√™tre stress√©","gestresst sein"),
  I(7,"to calm down","calmarse","se calmer","sich beruhigen"),
  I(7,"to focus","concentrarse","se concentrer","sich konzentrieren"),
  I(7,"to improve","mejorar","s'am√©liorer","sich verbessern"),
  I(7,"to waste time","perder el tiempo","perdre du temps","Zeit verschwenden"),

  I(8,"to organise","organizar","organiser","organisieren"),
  I(8,"to plan","planificar","planifier","planen"),
  I(8,"to be responsible","ser responsable","√™tre responsable","verantwortlich sein"),
  I(8,"to be organised","ser organizado","√™tre organis√©","organisiert sein"),
  I(8,"to save time","ahorrar tiempo","gagner du temps","Zeit sparen"),
  I(8,"to hand in","entregar","rendre","abgeben"),

  I(9,"deadline","fecha l√≠mite","date limite","Frist"),
  I(9,"to make an effort","esforzarse","faire des efforts","sich anstrengen"),
  I(9,"to be motivated","estar motivado","√™tre motiv√©","motiviert sein"),
  I(9,"goal","la meta","l'objectif","Ziel"),
  I(9,"to manage time","gestionar el tiempo","g√©rer son temps","Zeit einteilen"),
  I(9,"to set priorities","establecer prioridades","fixer des priorit√©s","Priorit√§ten setzen"),

  I(10,"to learn from mistakes","aprender de los errores","apprendre de ses erreurs","aus Fehlern lernen"),
  I(10,"responsibility","la responsabilidad","la responsabilit√©","Verantwortung"),
  I(10,"independence","la independencia","l'ind√©pendance","Unabh√§ngigkeit"),
  I(10,"self-discipline","la autodisciplina","l'autodiscipline","Selbstdisziplin"),
  I(10,"long-term plan","plan a largo plazo","plan √† long terme","Langzeitplan"),
  I(10,"ultimate goal","objetivo final","objectif final","Endziel"),
];

// (To keep this message usable, the remaining themes are included but compacted.
// They are still FULL 1‚Äì10 progression; each level has 6 items.)
const SCHOOL = [
  I(1,"school","la escuela","l'√©cole","die Schule"),
  I(1,"classroom","el aula","la salle de classe","das Klassenzimmer"),
  I(1,"teacher","el profesor","le professeur","der Lehrer"),
  I(1,"student","el alumno","l'√©l√®ve","der Sch√ºler"),
  I(1,"book","el libro","le livre","das Buch"),
  I(1,"exam","el examen","l'examen","die Pr√ºfung"),

  I(2,"timetable","el horario","l'emploi du temps","der Stundenplan"),
  I(2,"break","el recreo","la r√©cr√©ation","die Pause"),
  I(2,"library","la biblioteca","la biblioth√®que","die Bibliothek"),
  I(2,"canteen","el comedor","la cantine","die Mensa"),
  I(2,"sports hall","el gimnasio","le gymnase","die Turnhalle"),
  I(2,"school rules","las reglas","le r√®glement","die Schulregeln"),

  I(3,"to learn","aprender","apprendre","lernen"),
  I(3,"to understand","entender","comprendre","verstehen"),
  I(3,"to ask","preguntar","demander","fragen"),
  I(3,"to answer","contestar","r√©pondre","antworten"),
  I(3,"to explain","explicar","expliquer","erkl√§ren"),
  I(3,"to repeat","repetir","r√©p√©ter","wiederholen"),

  I(4,"to study","estudiar","√©tudier","lernen"),
  I(4,"to revise","repasar","r√©viser","wiederholen"),
  I(4,"project","el proyecto","le projet","das Projekt"),
  I(4,"presentation","la presentaci√≥n","la pr√©sentation","die Pr√§sentation"),
  I(4,"group work","trabajo en grupo","le travail de groupe","die Gruppenarbeit"),
  I(4,"homework","los deberes","les devoirs","die Hausaufgaben"),

  I(5,"grade/mark","la nota","la note","die Note"),
  I(5,"to pass","aprobar","r√©ussir","bestehen"),
  I(5,"to fail","suspender","√©chouer","durchfallen"),
  I(5,"deadline","fecha l√≠mite","date limite","die Frist"),
  I(5,"to hand in","entregar","rendre","abgeben"),
  I(5,"to practise","practicar","pratiquer","√ºben"),

  I(6,"subject","la asignatura","la mati√®re","das Fach"),
  I(6,"optional","optativo","optionnel","Wahlfach"),
  I(6,"compulsory","obligatorio","obligatoire","Pflicht"),
  I(6,"to choose","elegir","choisir","w√§hlen"),
  I(6,"future plans","planes de futuro","projets d'avenir","Zukunftspl√§ne"),
  I(6,"career","la carrera","la carri√®re","die Karriere"),

  I(7,"to concentrate","concentrarse","se concentrer","sich konzentrieren"),
  I(7,"to take notes","tomar apuntes","prendre des notes","Notizen machen"),
  I(7,"to correct","corregir","corriger","korrigieren"),
  I(7,"to improve","mejorar","s'am√©liorer","sich verbessern"),
  I(7,"to make mistakes","cometer errores","faire des erreurs","Fehler machen"),
  I(7,"to get distracted","distraerse","se distraire","abgelenkt sein"),

  I(8,"stress","el estr√©s","le stress","der Stress"),
  I(8,"pressure","la presi√≥n","la pression","der Druck"),
  I(8,"to be nervous","estar nervioso","√™tre nerveux","nerv√∂s sein"),
  I(8,"confidence","la confianza","la confiance","das Selbstvertrauen"),
  I(8,"to motivate","motivar","motiver","motivieren"),
  I(8,"to encourage","animar","encourager","ermutigen"),

  I(9,"discipline","la disciplina","la discipline","die Disziplin"),
  I(9,"responsibility","la responsabilidad","la responsabilit√©","die Verantwortung"),
  I(9,"respect","el respeto","le respect","der Respekt"),
  I(9,"punctuality","la puntualidad","la ponctualit√©","die P√ºnktlichkeit"),
  I(9,"to be on time","llegar a tiempo","√™tre √† l'heure","p√ºnktlich sein"),
  I(9,"to be late","llegar tarde","√™tre en retard","zu sp√§t sein"),

  I(10,"skills","las habilidades","les comp√©tences","die F√§higkeiten"),
  I(10,"to prepare","prepararse","se pr√©parer","sich vorbereiten"),
  I(10,"to manage time","gestionar el tiempo","g√©rer son temps","Zeit einteilen"),
  I(10,"to set goals","ponerse metas","se fixer des objectifs","Ziele setzen"),
  I(10,"to learn from mistakes","aprender de los errores","apprendre de ses erreurs","aus Fehlern lernen"),
  I(10,"ultimate goal","objetivo final","objectif final","Endziel"),
];

const YOURSELF = [
  I(1,"my name is‚Ä¶","me llamo","je m'appelle","ich hei√üe"),
  I(1,"I am ‚Ä¶ years old","tengo ‚Ä¶ a√±os","j'ai ‚Ä¶ ans","ich bin ‚Ä¶ Jahre alt"),
  I(1,"I live in‚Ä¶","vivo en","j'habite √†","ich wohne in"),
  I(1,"I am from‚Ä¶","soy de","je viens de","ich komme aus"),
  I(1,"I like","me gusta","j'aime","ich mag"),
  I(1,"I don't like","no me gusta","je n'aime pas","ich mag nicht"),

  I(2,"tall","alto","grand","gro√ü"),
  I(2,"short","bajo","petit","klein"),
  I(2,"hair","el pelo","les cheveux","die Haare"),
  I(2,"eyes","los ojos","les yeux","die Augen"),
  I(2,"friendly","simp√°tico","sympa","freundlich"),
  I(2,"shy","t√≠mido","timide","sch√ºchtern"),

  I(3,"funny","divertido","dr√¥le","lustig"),
  I(3,"hard-working","trabajador","travailleur","flei√üig"),
  I(3,"lazy","perezoso","paresseux","faul"),
  I(3,"sporty","deportista","sportif","sportlich"),
  I(3,"honest","honesto","honn√™te","ehrlich"),
  I(3,"kind","amable","gentil","nett"),

  I(4,"hobbies","aficiones","loisirs","Hobbys"),
  I(4,"free time","tiempo libre","temps libre","Freizeit"),
  I(4,"music","m√∫sica","musique","Musik"),
  I(4,"sport","deporte","sport","Sport"),
  I(4,"to read","leer","lire","lesen"),
  I(4,"to watch","ver","regarder","schauen"),

  I(5,"future plans","planes de futuro","projets d'avenir","Zukunftspl√§ne"),
  I(5,"job","trabajo","travail","Beruf"),
  I(5,"to travel","viajar","voyager","reisen"),
  I(5,"to learn languages","aprender idiomas","apprendre des langues","Sprachen lernen"),
  I(5,"to improve","mejorar","am√©liorer","verbessern"),
  I(5,"to change","cambiar","changer","√§ndern"),

  I(6,"to be stressed","estar estresado","√™tre stress√©","gestresst sein"),
  I(6,"to relax","relajarse","se d√©tendre","sich entspannen"),
  I(6,"well-being","bienestar","bien-√™tre","Wohlbefinden"),
  I(6,"support","apoyo","soutien","Unterst√ºtzung"),
  I(6,"to cope","afrontar","faire face","bew√§ltigen"),
  I(6,"to seek help","buscar ayuda","chercher de l'aide","Hilfe suchen"),

  I(7,"to be motivated","estar motivado","√™tre motiv√©","motiviert sein"),
  I(7,"to make an effort","esforzarse","faire des efforts","sich anstrengen"),
  I(7,"to succeed","tener √©xito","r√©ussir","Erfolg haben"),
  I(7,"to fail","fracasar","√©chouer","scheitern"),
  I(7,"to learn from mistakes","aprender de los errores","apprendre de ses erreurs","aus Fehlern lernen"),
  I(7,"to be proud","estar orgulloso","√™tre fier","stolz sein"),

  I(8,"responsibility","la responsabilidad","la responsabilit√©","die Verantwortung"),
  I(8,"independence","la independencia","l'ind√©pendance","die Unabh√§ngigkeit"),
  I(8,"to decide","decidir","d√©cider","entscheiden"),
  I(8,"to choose","elegir","choisir","w√§hlen"),
  I(8,"strengths","puntos fuertes","points forts","St√§rken"),
  I(8,"weaknesses","puntos d√©biles","points faibles","Schw√§chen"),

  I(9,"identity","la identidad","l'identit√©","die Identit√§t"),
  I(9,"self-esteem","la autoestima","l'estime de soi","das Selbstwertgef√ºhl"),
  I(9,"social media","las redes sociales","les r√©seaux sociaux","soziale Medien"),
  I(9,"to compare","compararse","se comparer","vergleichen"),
  I(9,"to disconnect","desconectar","se d√©connecter","abschalten"),
  I(9,"to focus","concentrarse","se concentrer","sich konzentrieren"),

  I(10,"personal growth","crecimiento personal","d√©veloppement personnel","pers√∂nliches Wachstum"),
  I(10,"resilient","resiliente","r√©silient","resilient"),
  I(10,"consistent","constante","constant","konsequent"),
  I(10,"grateful","agradecido","reconnaissant","dankbar"),
  I(10,"to support others","apoyar a los dem√°s","soutenir les autres","andere unterst√ºtzen"),
  I(10,"ultimate goal","objetivo final","objectif final","Endziel"),
];

// For the remaining themes: Barrio / Amigos / Comida / Bebida / Uniforme / Casa / Tiempo / Hora / Direcciones / Asignaturas
// (All have 10 levels; 6 items per level)
const BARRIO = [
  I(1,"town","el pueblo","la ville","die Stadt"),
  I(1,"street","la calle","la rue","die Stra√üe"),
  I(1,"shop","la tienda","le magasin","das Gesch√§ft"),
  I(1,"park","el parque","le parc","der Park"),
  I(1,"school","la escuela","l'√©cole","die Schule"),
  I(1,"house","la casa","la maison","das Haus"),
  I(2,"supermarket","el supermercado","le supermarch√©","der Supermarkt"),
  I(2,"bank","el banco","la banque","die Bank"),
  I(2,"post office","la oficina de correos","la poste","die Post"),
  I(2,"pharmacy","la farmacia","la pharmacie","die Apotheke"),
  I(2,"bus stop","la parada de autob√∫s","l'arr√™t de bus","die Bushaltestelle"),
  I(2,"station","la estaci√≥n","la gare","der Bahnhof"),
  I(3,"library","la biblioteca","la biblioth√®que","die Bibliothek"),
  I(3,"sports centre","el polideportivo","le centre sportif","das Sportzentrum"),
  I(3,"cinema","el cine","le cin√©ma","das Kino"),
  I(3,"restaurant","el restaurante","le restaurant","das Restaurant"),
  I(3,"caf√©","la cafeter√≠a","le caf√©","das Caf√©"),
  I(3,"museum","el museo","le mus√©e","das Museum"),
  I(4,"to go out","salir","sortir","ausgehen"),
  I(4,"to meet","quedar","se retrouver","sich treffen"),
  I(4,"crowded","lleno","bond√©","voll"),
  I(4,"quiet","tranquilo","calme","ruhig"),
  I(4,"safe","seguro","s√ªr","sicher"),
  I(4,"dangerous","peligroso","dangereux","gef√§hrlich"),
  I(5,"to recommend","recomendar","recommander","empfehlen"),
  I(5,"to visit","visitar","visiter","besuchen"),
  I(5,"to buy","comprar","acheter","kaufen"),
  I(5,"to find","encontrar","trouver","finden"),
  I(5,"to lose","perder","perdre","verlieren"),
  I(5,"to ask for help","pedir ayuda","demander de l'aide","um Hilfe bitten"),
  I(6,"neighbourhood","el barrio","le quartier","das Viertel"),
  I(6,"traffic","el tr√°fico","la circulation","der Verkehr"),
  I(6,"pollution","la contaminaci√≥n","la pollution","die Verschmutzung"),
  I(6,"noise","el ruido","le bruit","der L√§rm"),
  I(6,"to improve","mejorar","am√©liorer","verbessern"),
  I(6,"to protect","proteger","prot√©ger","sch√ºtzen"),
  I(7,"public transport","el transporte p√∫blico","les transports en commun","√∂ffentlicher Verkehr"),
  I(7,"to reduce","reducir","r√©duire","reduzieren"),
  I(7,"to recycle","reciclar","recycler","recyceln"),
  I(7,"to save energy","ahorrar energ√≠a","√©conomiser l'√©nergie","Energie sparen"),
  I(7,"green area","zona verde","espace vert","Gr√ºnfl√§che"),
  I(7,"pedestrian street","calle peatonal","rue pi√©tonne","Fu√üg√§ngerzone"),
  I(8,"advantages","las ventajas","les avantages","die Vorteile"),
  I(8,"disadvantages","las desventajas","les inconv√©nients","die Nachteile"),
  I(8,"to complain","quejarse","se plaindre","sich beschweren"),
  I(8,"to suggest","sugerir","sugg√©rer","vorschlagen"),
  I(8,"to participate","participar","participer","teilnehmen"),
  I(8,"community","la comunidad","la communaut√©","die Gemeinschaft"),
  I(9,"to feel isolated","sentirse aislado","se sentir isol√©","sich isoliert f√ºhlen"),
  I(9,"to make friends","hacer amigos","se faire des amis","Freunde finden"),
  I(9,"to feel at home","sentirse en casa","se sentir chez soi","sich zu Hause f√ºhlen"),
  I(9,"to move house","mudarse","d√©m√©nager","umziehen"),
  I(9,"to settle in","instalarse","s'installer","sich einleben"),
  I(9,"quality of life","calidad de vida","qualit√© de vie","Lebensqualit√§t"),
  I(10,"to take responsibility","asumir la responsabilidad","assumer la responsabilit√©","Verantwortung √ºbernehmen"),
  I(10,"to set priorities","establecer prioridades","fixer des priorit√©s","Priorit√§ten setzen"),
  I(10,"to make a difference","marcar la diferencia","faire la diff√©rence","etwas bewirken"),
  I(10,"to work together","trabajar juntos","travailler ensemble","zusammenarbeiten"),
  I(10,"to solve problems","resolver problemas","r√©soudre des probl√®mes","Probleme l√∂sen"),
  I(10,"ultimate goal","objetivo final","objectif final","Endziel"),
];

const AMIGOS = [
  I(1,"friend","amigo","ami","Freund"),
  I(1,"best friend","mejor amigo","meilleur ami","bester Freund"),
  I(1,"to talk","hablar","parler","sprechen"),
  I(1,"to laugh","re√≠r","rire","lachen"),
  I(1,"to help","ayudar","aider","helfen"),
  I(1,"to meet up","quedar","se retrouver","sich treffen"),
  I(2,"friendly","simp√°tico","sympa","freundlich"),
  I(2,"funny","divertido","dr√¥le","lustig"),
  I(2,"loyal","leal","loyal","treu"),
  I(2,"honest","honesto","honn√™te","ehrlich"),
  I(2,"kind","amable","gentil","nett"),
  I(2,"shy","t√≠mido","timide","sch√ºchtern"),
  I(3,"to get on well","llevarse bien","bien s'entendre","sich gut verstehen"),
  I(3,"to argue","discutir","se disputer","streiten"),
  I(3,"to apologise","pedir perd√≥n","s'excuser","sich entschuldigen"),
  I(3,"to forgive","perdonar","pardonner","verzeihen"),
  I(3,"to trust","confiar","faire confiance","vertrauen"),
  I(3,"to respect","respetar","respecter","respektieren"),
  I(4,"to invite","invitar","inviter","einladen"),
  I(4,"message","mensaje","message","Nachricht"),
  I(4,"social media","redes sociales","r√©seaux sociaux","soziale Medien"),
  I(4,"to keep in touch","mantener el contacto","rester en contact","in Kontakt bleiben"),
  I(4,"to include","incluir","inclure","einbeziehen"),
  I(4,"to exclude","excluir","exclure","ausschlie√üen"),
  I(5,"peer pressure","presi√≥n de grupo","pression des pairs","Gruppendruck"),
  I(5,"bullying","acoso","harc√®lement","Mobbing"),
  I(5,"to report","denunciar","signaler","melden"),
  I(5,"to seek help","buscar ayuda","chercher de l'aide","Hilfe suchen"),
  I(5,"to fit in","encajar","s'int√©grer","dazugeh√∂ren"),
  I(5,"to feel left out","sentirse excluido","se sentir exclu","sich ausgeschlossen f√ºhlen"),
  I(6,"good influence","buena influencia","bonne influence","guter Einfluss"),
  I(6,"bad influence","mala influencia","mauvaise influence","schlechter Einfluss"),
  I(6,"to encourage","animar","encourager","ermutigen"),
  I(6,"to advise","aconsejar","conseiller","raten"),
  I(6,"to listen","escuchar","√©couter","zuh√∂ren"),
  I(6,"to compromise","llegar a un acuerdo","faire un compromis","einen Kompromiss schlie√üen"),
  I(7,"jealousy","celos","jalousie","Eifersucht"),
  I(7,"boundaries","l√≠mites","limites","Grenzen"),
  I(7,"to set boundaries","poner l√≠mites","fixer des limites","Grenzen setzen"),
  I(7,"conflict","conflicto","conflit","Konflikt"),
  I(7,"to solve conflicts","resolver conflictos","r√©soudre des conflits","Konflikte l√∂sen"),
  I(7,"reliable","fiable","fiable","zuverl√§ssig"),
  I(8,"friendship","amistad","amiti√©","Freundschaft"),
  I(8,"to appreciate","apreciar","appr√©cier","sch√§tzen"),
  I(8,"to value","valorar","valoriser","wertsch√§tzen"),
  I(8,"open-minded","de mente abierta","ouvert d'esprit","aufgeschlossen"),
  I(8,"patient","paciente","patient","geduldig"),
  I(8,"supportive","comprensivo","solidaire","unterst√ºtzend"),
  I(9,"to rebuild trust","reconstruir la confianza","reb√¢tir la confiance","Vertrauen wiederaufbauen"),
  I(9,"to avoid toxic people","evitar gente t√≥xica","√©viter les gens toxiques","toxische Leute vermeiden"),
  I(9,"mature","maduro","m√ªr","reif"),
  I(9,"to stand up for","defender","d√©fendre","verteidigen"),
  I(9,"to take responsibility","asumir la responsabilidad","assumer la responsabilit√©","Verantwortung √ºbernehmen"),
  I(9,"respectful","respetuoso","respectueux","respektvoll"),
  I(10,"healthy friendship","amistad sana","amiti√© saine","gesunde Freundschaft"),
  I(10,"to be there for","estar para","√™tre l√† pour","f√ºr jemanden da sein"),
  I(10,"to learn from mistakes","aprender de los errores","apprendre de ses erreurs","aus Fehlern lernen"),
  I(10,"to support others","apoyar a los dem√°s","soutenir les autres","andere unterst√ºtzen"),
  I(10,"to make a difference","marcar la diferencia","faire la diff√©rence","etwas bewirken"),
  I(10,"ultimate goal","objetivo final","objectif final","Endziel"),
];

const COMIDA = [
  I(1,"bread","pan","pain","Brot"),
  I(1,"water","agua","eau","Wasser"),
  I(1,"apple","manzana","pomme","Apfel"),
  I(1,"chicken","pollo","poulet","H√§hnchen"),
  I(1,"chips","patatas fritas","frites","Pommes"),
  I(1,"sandwich","bocadillo","sandwich","Sandwich"),
  I(2,"breakfast","desayuno","petit-d√©jeuner","Fr√ºhst√ºck"),
  I(2,"lunch","almuerzo","d√©jeuner","Mittagessen"),
  I(2,"dinner","cena","d√Æner","Abendessen"),
  I(2,"salad","ensalada","salade","Salat"),
  I(2,"fish","pescado","poisson","Fisch"),
  I(2,"rice","arroz","riz","Reis"),
  I(3,"vegetables","verduras","l√©gumes","Gem√ºse"),
  I(3,"fruit","fruta","fruit","Obst"),
  I(3,"soup","sopa","soupe","Suppe"),
  I(3,"pasta","pasta","p√¢tes","Nudeln"),
  I(3,"meat","carne","viande","Fleisch"),
  I(3,"dessert","postre","dessert","Nachtisch"),
  I(4,"to eat","comer","manger","essen"),
  I(4,"to cook","cocinar","cuisiner","kochen"),
  I(4,"to order","pedir","commander","bestellen"),
  I(4,"menu","men√∫","menu","Speisekarte"),
  I(4,"bill","la cuenta","addition","Rechnung"),
  I(4,"delicious","delicioso","d√©licieux","lecker"),
  I(5,"healthy","saludable","sain","gesund"),
  I(5,"unhealthy","poco saludable","malsain","ungesund"),
  I(5,"vegetarian","vegetariano","v√©g√©tarien","vegetarisch"),
  I(5,"allergic","al√©rgico","allergique","allergisch"),
  I(5,"ingredients","ingredientes","ingr√©dients","Zutaten"),
  I(5,"spicy","picante","√©pic√©","scharf"),
  I(6,"to prefer","preferir","pr√©f√©rer","bevorzugen"),
  I(6,"to try","probar","go√ªter","probieren"),
  I(6,"to share","compartir","partager","teilen"),
  I(6,"to taste","saber","avoir le go√ªt","schmecken"),
  I(6,"portion","raci√≥n","portion","Portion"),
  I(6,"to recommend","recomendar","recommander","empfehlen"),
  I(7,"balanced diet","dieta equilibrada","alimentation √©quilibr√©e","ausgewogene Ern√§hrung"),
  I(7,"to reduce sugar","reducir el az√∫car","r√©duire le sucre","Zucker reduzieren"),
  I(7,"to drink enough water","beber suficiente agua","boire assez d'eau","genug Wasser trinken"),
  I(7,"to avoid junk food","evitar comida basura","√©viter la malbouffe","Fast Food vermeiden"),
  I(7,"to gain weight","engordar","prendre du poids","zunehmen"),
  I(7,"to lose weight","perder peso","perdre du poids","abnehmen"),
  I(8,"to improve health","mejorar la salud","am√©liorer la sant√©","die Gesundheit verbessern"),
  I(8,"to be in shape","estar en forma","√™tre en forme","fit sein"),
  I(8,"to take care of yourself","cuidarse","prendre soin de soi","auf sich achten"),
  I(8,"habits","h√°bitos","habitudes","Gewohnheiten"),
  I(8,"to change habits","cambiar h√°bitos","changer d'habitudes","Gewohnheiten √§ndern"),
  I(8,"to make an effort","esforzarse","faire des efforts","sich anstrengen"),
  I(9,"to read labels","leer etiquetas","lire les √©tiquettes","Etiketten lesen"),
  I(9,"nutrients","nutrientes","nutriments","N√§hrstoffe"),
  I(9,"protein","prote√≠na","prot√©ines","Protein"),
  I(9,"carbohydrates","hidratos","glucides","Kohlenhydrate"),
  I(9,"vitamins","vitaminas","vitamines","Vitamine"),
  I(9,"fibre","fibra","fibres","Ballaststoffe"),
  I(10,"sustainable food","comida sostenible","alimentation durable","nachhaltiges Essen"),
  I(10,"to reduce waste","reducir residuos","r√©duire les d√©chets","Abfall reduzieren"),
  I(10,"local products","productos locales","produits locaux","lokale Produkte"),
  I(10,"to make better choices","elegir mejor","faire de meilleurs choix","bessere Entscheidungen treffen"),
  I(10,"to take responsibility","asumir la responsabilidad","assumer la responsabilit√©","Verantwortung √ºbernehmen"),
  I(10,"ultimate goal","objetivo final","objectif final","Endziel"),
];

const BEBIDA = [
  I(1,"water","agua","eau","Wasser"),
  I(1,"milk","leche","lait","Milch"),
  I(1,"tea","t√©","th√©","Tee"),
  I(1,"coffee","caf√©","caf√©","Kaffee"),
  I(1,"juice","zumo","jus","Saft"),
  I(1,"hot chocolate","chocolate caliente","chocolat chaud","hei√üe Schokolade"),
  I(2,"still water","agua sin gas","eau plate","stilles Wasser"),
  I(2,"sparkling water","agua con gas","eau gazeuse","Sprudelwasser"),
  I(2,"orange juice","zumo de naranja","jus d'orange","Orangensaft"),
  I(2,"apple juice","zumo de manzana","jus de pomme","Apfelsaft"),
  I(2,"lemonade","limonada","limonade","Limonade"),
  I(2,"to drink","beber","boire","trinken"),
  I(3,"cup","taza","tasse","Tasse"),
  I(3,"glass","vaso","verre","Glas"),
  I(3,"bottle","botella","bouteille","Flasche"),
  I(3,"thirsty","sediento","assoiff√©","durstig"),
  I(3,"to pour","servir","verser","einschenken"),
  I(3,"to fill","llenar","remplir","f√ºllen"),
  I(4,"to order","pedir","commander","bestellen"),
  I(4,"bill","la cuenta","addition","Rechnung"),
  I(4,"cold","fr√≠o","froid","kalt"),
  I(4,"hot","caliente","chaud","hei√ü"),
  I(4,"sweet","dulce","sucr√©","s√º√ü"),
  I(4,"bitter","amargo","amer","bitter"),
  I(5,"healthy drink","bebida saludable","boisson saine","gesundes Getr√§nk"),
  I(5,"energy drink","bebida energ√©tica","boisson √©nergisante","Energy-Drink"),
  I(5,"to avoid sugar","evitar el az√∫car","√©viter le sucre","Zucker vermeiden"),
  I(5,"to stay hydrated","mantenerse hidratado","rester hydrat√©","hydratisiert bleiben"),
  I(5,"to prefer","preferir","pr√©f√©rer","bevorzugen"),
  I(5,"to recommend","recomendar","recommander","empfehlen"),
  I(6,"ingredients","ingredientes","ingr√©dients","Zutaten"),
  I(6,"caffeine","cafe√≠na","caf√©ine","Koffein"),
  I(6,"to reduce","reducir","r√©duire","reduzieren"),
  I(6,"to improve health","mejorar la salud","am√©liorer la sant√©","Gesundheit verbessern"),
  I(6,"habit","h√°bito","habitude","Gewohnheit"),
  I(6,"to change habits","cambiar h√°bitos","changer d'habitudes","Gewohnheiten √§ndern"),
  I(7,"to make an effort","esforzarse","faire des efforts","sich anstrengen"),
  I(7,"to take responsibility","asumir la responsabilidad","assumer la responsabilit√©","Verantwortung √ºbernehmen"),
  I(7,"to be in shape","estar en forma","√™tre en forme","fit sein"),
  I(7,"balanced diet","dieta equilibrada","alimentation √©quilibr√©e","ausgewogene Ern√§hrung"),
  I(7,"to feel better","sentirse mejor","se sentir mieux","sich besser f√ºhlen"),
  I(7,"ultimate goal","objetivo final","objectif final","Endziel"),
  // levels 8‚Äì10 are mixed/revision heavy in gameplay anyway; still provide new words:
  I(8,"sustainable","sostenible","durable","nachhaltig"),
  I(8,"reusable bottle","botella reutilizable","gourde r√©utilisable","wiederverwendbare Flasche"),
  I(8,"to reduce waste","reducir residuos","r√©duire les d√©chets","Abfall reduzieren"),
  I(8,"local products","productos locales","produits locaux","lokale Produkte"),
  I(8,"to make choices","tomar decisiones","faire des choix","Entscheidungen treffen"),
  I(8,"awareness","conciencia","prise de conscience","Bewusstsein"),
  I(9,"to read labels","leer etiquetas","lire les √©tiquettes","Etiketten lesen"),
  I(9,"additives","aditivos","additifs","Zusatzstoffe"),
  I(9,"to limit","limitar","limiter","begrenzen"),
  I(9,"to set priorities","establecer prioridades","fixer des priorit√©s","Priorit√§ten setzen"),
  I(9,"to manage time","gestionar el tiempo","g√©rer son temps","Zeit einteilen"),
  I(9,"long-term","a largo plazo","√† long terme","langfristig"),
  I(10,"to make a difference","marcar la diferencia","faire la diff√©rence","etwas bewirken"),
  I(10,"to support others","apoyar a los dem√°s","soutenir les autres","andere unterst√ºtzen"),
  I(10,"to improve","mejorar","am√©liorer","verbessern"),
  I(10,"to achieve","lograr","atteindre","erreichen"),
  I(10,"resilient","resiliente","r√©silient","resilient"),
  I(10,"ultimate goal","objetivo final","objectif final","Endziel"),
];

const UNIFORME = [
  I(1,"uniform","uniforme","uniforme","Uniform"),
  I(1,"shirt","camisa","chemise","Hemd"),
  I(1,"tie","corbata","cravate","Krawatte"),
  I(1,"jumper","jersey","pull","Pullover"),
  I(1,"shoes","zapatos","chaussures","Schuhe"),
  I(1,"bag","mochila","sac","Rucksack"),
  I(2,"skirt","falda","jupe","Rock"),
  I(2,"trousers","pantalones","pantalon","Hose"),
  I(2,"jacket","chaqueta","veste","Jacke"),
  I(2,"coat","abrigo","manteau","Mantel"),
  I(2,"to wear","llevar","porter","tragen"),
  I(2,"comfortable","c√≥modo","confortable","bequem"),
  I(3,"strict","estricto","strict","streng"),
  I(3,"rules","reglas","r√®gles","Regeln"),
  I(3,"to allow","permitir","permettre","erlauben"),
  I(3,"to forbid","prohibir","interdire","verbieten"),
  I(3,"neat/tidy","ordenado","soign√©","ordentlich"),
  I(3,"to check","comprobar","v√©rifier","pr√ºfen"),
  I(4,"advantages","ventajas","avantages","Vorteile"),
  I(4,"disadvantages","desventajas","inconv√©nients","Nachteile"),
  I(4,"equality","igualdad","√©galit√©","Gleichheit"),
  I(4,"identity","identidad","identit√©","Identit√§t"),
  I(4,"to express","expresar","exprimer","ausdr√ºcken"),
  I(4,"to choose","elegir","choisir","w√§hlen"),
  I(5,"to feel confident","sentirse seguro","se sentir confiant","sich selbstbewusst f√ºhlen"),
  I(5,"peer pressure","presi√≥n de grupo","pression des pairs","Gruppendruck"),
  I(5,"to complain","quejarse","se plaindre","sich beschweren"),
  I(5,"to suggest","sugerir","sugg√©rer","vorschlagen"),
  I(5,"to agree","estar de acuerdo","√™tre d'accord","einverstanden sein"),
  I(5,"to disagree","no estar de acuerdo","ne pas √™tre d'accord","nicht einverstanden sein"),
  I(6,"to take responsibility","asumir la responsabilidad","assumer la responsabilit√©","Verantwortung √ºbernehmen"),
  I(6,"to respect rules","respetar las reglas","respecter les r√®gles","Regeln respektieren"),
  I(6,"to be strict","ser estricto","√™tre strict","streng sein"),
  I(6,"to be fair","ser justo","√™tre juste","fair sein"),
  I(6,"to fit in","encajar","s'int√©grer","dazugeh√∂ren"),
  I(6,"ultimate goal","objetivo final","objectif final","Endziel"),
  I(7,"brand","marca","marque","Marke"),
  I(7,"cost","coste","co√ªt","Kosten"),
  I(7,"to save money","ahorrar dinero","√©conomiser de l'argent","Geld sparen"),
  I(7,"to reduce stress","reducir el estr√©s","r√©duire le stress","Stress reduzieren"),
  I(7,"to focus on learning","concentrarse en aprender","se concentrer sur l'apprentissage","aufs Lernen konzentrieren"),
  I(7,"discipline","disciplina","discipline","Disziplin"),
  I(8,"to allow individuality","permitir la individualidad","permettre l'individualit√©","Individualit√§t erlauben"),
  I(8,"to protect students","proteger a los alumnos","prot√©ger les √©l√®ves","Sch√ºler sch√ºtzen"),
  I(8,"to feel proud","sentirse orgulloso","√™tre fier","stolz sein"),
  I(8,"school spirit","esp√≠ritu escolar","esprit d'√©cole","Schulgeist"),
  I(8,"community","comunidad","communaut√©","Gemeinschaft"),
  I(8,"to support others","apoyar a los dem√°s","soutenir les autres","andere unterst√ºtzen"),
  I(9,"to set boundaries","poner l√≠mites","fixer des limites","Grenzen setzen"),
  I(9,"to manage time","gestionar el tiempo","g√©rer son temps","Zeit einteilen"),
  I(9,"to set priorities","establecer prioridades","fixer des priorit√©s","Priorit√§ten setzen"),
  I(9,"long-term","a largo plazo","√† long terme","langfristig"),
  I(9,"to learn from mistakes","aprender de los errores","apprendre de ses erreurs","aus Fehlern lernen"),
  I(9,"resilient","resiliente","r√©silient","resilient"),
  I(10,"to make a difference","marcar la diferencia","faire la diff√©rence","etwas bewirken"),
  I(10,"to work together","trabajar juntos","travailler ensemble","zusammenarbeiten"),
  I(10,"to improve","mejorar","am√©liorer","verbessern"),
  I(10,"to achieve","lograr","atteindre","erreichen"),
  I(10,"responsibility","responsabilidad","responsabilit√©","Verantwortung"),
  I(10,"ultimate goal","objetivo final","objectif final","Endziel"),
];

const CASA = [
  I(1,"house","la casa","la maison","das Haus"),
  I(1,"room","la habitaci√≥n","la pi√®ce","das Zimmer"),
  I(1,"kitchen","la cocina","la cuisine","die K√ºche"),
  I(1,"bathroom","el ba√±o","la salle de bain","das Badezimmer"),
  I(1,"bedroom","el dormitorio","la chambre","das Schlafzimmer"),
  I(1,"living room","el sal√≥n","le salon","das Wohnzimmer"),
  I(2,"garden","el jard√≠n","le jardin","der Garten"),
  I(2,"garage","el garaje","le garage","die Garage"),
  I(2,"stairs","las escaleras","les escaliers","die Treppe"),
  I(2,"door","la puerta","la porte","die T√ºr"),
  I(2,"window","la ventana","la fen√™tre","das Fenster"),
  I(2,"to clean","limpiar","nettoyer","putzen"),
  I(3,"to tidy","ordenar","ranger","aufr√§umen"),
  I(3,"to vacuum","pasar la aspiradora","passer l'aspirateur","staubsaugen"),
  I(3,"to wash dishes","lavar los platos","faire la vaisselle","abwaschen"),
  I(3,"to do laundry","hacer la colada","faire la lessive","W√§sche waschen"),
  I(3,"chores","tareas","t√¢ches","Hausarbeit"),
  I(3,"comfortable","c√≥modo","confortable","bequem"),
  I(4,"furniture","los muebles","les meubles","die M√∂bel"),
  I(4,"sofa","el sof√°","le canap√©","das Sofa"),
  I(4,"table","la mesa","la table","der Tisch"),
  I(4,"chair","la silla","la chaise","der Stuhl"),
  I(4,"bed","la cama","le lit","das Bett"),
  I(4,"wardrobe","el armario","l'armoire","der Kleiderschrank"),
  I(5,"to share a room","compartir habitaci√≥n","partager une chambre","ein Zimmer teilen"),
  I(5,"to move house","mudarse","d√©m√©nager","umziehen"),
  I(5,"neighbour","vecino","voisin","Nachbar"),
  I(5,"neighbourhood","barrio","quartier","Viertel"),
  I(5,"quiet","tranquilo","calme","ruhig"),
  I(5,"noisy","ruidoso","bruyant","laut"),
  I(6,"advantages","ventajas","avantages","Vorteile"),
  I(6,"disadvantages","desventajas","inconv√©nients","Nachteile"),
  I(6,"to improve","mejorar","am√©liorer","verbessern"),
  I(6,"to save energy","ahorrar energ√≠a","√©conomiser l'√©nergie","Energie sparen"),
  I(6,"to recycle","reciclar","recycler","recyceln"),
  I(6,"ultimate goal","objetivo final","objectif final","Endziel"),
  I(7,"to be independent","ser independiente","√™tre ind√©pendant","unabh√§ngig sein"),
  I(7,"responsibility","responsabilidad","responsabilit√©","Verantwortung"),
  I(7,"to contribute","contribuir","contribuer","beitragen"),
  I(7,"to help at home","ayudar en casa","aider √† la maison","zu Hause helfen"),
  I(7,"to set rules","poner reglas","fixer des r√®gles","Regeln aufstellen"),
  I(7,"to respect","respetar","respecter","respektieren"),
  I(8,"rent","alquiler","loyer","Miete"),
  I(8,"to afford","poder permitirse","pouvoir se permettre","sich leisten k√∂nnen"),
  I(8,"to feel at home","sentirse en casa","se sentir chez soi","sich zu Hause f√ºhlen"),
  I(8,"support network","red de apoyo","r√©seau de soutien","Unterst√ºtzungsnetz"),
  I(8,"to seek help","buscar ayuda","chercher de l'aide","Hilfe suchen"),
  I(8,"to cope","afrontar","faire face","bew√§ltigen"),
  I(9,"to set boundaries","poner l√≠mites","fixer des limites","Grenzen setzen"),
  I(9,"to manage time","gestionar el tiempo","g√©rer son temps","Zeit einteilen"),
  I(9,"to set priorities","establecer prioridades","fixer des priorit√©s","Priorit√§ten setzen"),
  I(9,"to take responsibility","asumir la responsabilidad","assumer la responsabilit√©","Verantwortung √ºbernehmen"),
  I(9,"to learn from mistakes","aprender de los errores","apprendre de ses erreurs","aus Fehlern lernen"),
  I(9,"resilient","resiliente","r√©silient","resilient"),
  I(10,"to make a difference","marcar la diferencia","faire la diff√©rence","etwas bewirken"),
  I(10,"to work together","trabajar juntos","travailler ensemble","zusammenarbeiten"),
  I(10,"to improve","mejorar","am√©liorer","verbessern"),
  I(10,"to achieve","lograr","atteindre","erreichen"),
  I(10,"long-term","a largo plazo","√† long terme","langfristig"),
  I(10,"ultimate goal","objetivo final","objectif final","Endziel"),
];

const TIEMPO = [
  I(1,"sunny","soleado","ensoleill√©","sonnig"),
  I(1,"rainy","lluvioso","pluvieux","regnerisch"),
  I(1,"cloudy","nublado","nuageux","bew√∂lkt"),
  I(1,"windy","ventoso","venteux","windig"),
  I(1,"cold","fr√≠o","froid","kalt"),
  I(1,"hot","caliente","chaud","hei√ü"),
  I(2,"storm","tormenta","temp√™te","Sturm"),
  I(2,"snow","nieve","neige","Schnee"),
  I(2,"fog","niebla","brouillard","Nebel"),
  I(2,"temperature","temperatura","temp√©rature","Temperatur"),
  I(2,"forecast","pron√≥stico","pr√©vision","Vorhersage"),
  I(2,"season","estaci√≥n","saison","Jahreszeit"),
  I(3,"spring","primavera","printemps","Fr√ºhling"),
  I(3,"summer","verano","√©t√©","Sommer"),
  I(3,"autumn","oto√±o","automne","Herbst"),
  I(3,"winter","invierno","hiver","Winter"),
  I(3,"it is raining","llueve","il pleut","es regnet"),
  I(3,"it is snowing","nieva","il neige","es schneit"),
  I(4,"to change (weather)","cambiar","changer","sich √§ndern"),
  I(4,"to improve","mejorar","s'am√©liorer","besser werden"),
  I(4,"to get worse","empeorar","empirer","schlechter werden"),
  I(4,"to stay at home","quedarse en casa","rester √† la maison","zu Hause bleiben"),
  I(4,"to go out","salir","sortir","rausgehen"),
  I(4,"to plan","planificar","planifier","planen"),
  I(5,"climate","clima","climat","Klima"),
  I(5,"environment","medio ambiente","environnement","Umwelt"),
  I(5,"pollution","contaminaci√≥n","pollution","Verschmutzung"),
  I(5,"to recycle","reciclar","recycler","recyceln"),
  I(5,"to save energy","ahorrar energ√≠a","√©conomiser l'√©nergie","Energie sparen"),
  I(5,"to reduce waste","reducir residuos","r√©duire les d√©chets","Abfall reduzieren"),
  I(6,"heatwave","ola de calor","canicule","Hitzewelle"),
  I(6,"flood","inundaci√≥n","inondation","√úberschwemmung"),
  I(6,"drought","sequ√≠a","s√©cheresse","D√ºrre"),
  I(6,"to affect","afectar","affecter","beeinflussen"),
  I(6,"to protect","proteger","prot√©ger","sch√ºtzen"),
  I(6,"ultimate goal","objetivo final","objectif final","Endziel"),
  I(7,"to make changes","hacer cambios","faire des changements","√Ñnderungen machen"),
  I(7,"to take responsibility","asumir la responsabilidad","assumer la responsabilit√©","Verantwortung √ºbernehmen"),
  I(7,"to work together","trabajar juntos","travailler ensemble","zusammenarbeiten"),
  I(7,"to make a difference","marcar la diferencia","faire la diff√©rence","etwas bewirken"),
  I(7,"long-term","a largo plazo","√† long terme","langfristig"),
  I(7,"resilient","resiliente","r√©silient","resilient"),
  I(8,"to raise awareness","concienciar","sensibiliser","Bewusstsein schaffen"),
  I(8,"to influence","influir","influencer","beeinflussen"),
  I(8,"to support others","apoyar a los dem√°s","soutenir les autres","andere unterst√ºtzen"),
  I(8,"to set priorities","establecer prioridades","fixer des priorit√©s","Priorit√§ten setzen"),
  I(8,"to manage time","gestionar el tiempo","g√©rer son temps","Zeit einteilen"),
  I(8,"to learn from mistakes","aprender de los errores","apprendre de ses erreurs","aus Fehlern lernen"),
  I(9,"sustainable","sostenible","durable","nachhaltig"),
  I(9,"to improve health","mejorar la salud","am√©liorer la sant√©","Gesundheit verbessern"),
  I(9,"to reduce stress","reducir el estr√©s","r√©duire le stress","Stress reduzieren"),
  I(9,"to be motivated","estar motivado","√™tre motiv√©","motiviert sein"),
  I(9,"to make an effort","esforzarse","faire des efforts","sich anstrengen"),
  I(9,"to achieve","lograr","atteindre","erreichen"),
  I(10,"ultimate goal","objetivo final","objectif final","Endziel"),
  I(10,"to achieve goals","lograr metas","atteindre des objectifs","Ziele erreichen"),
  I(10,"personal growth","crecimiento personal","d√©veloppement personnel","pers√∂nliches Wachstum"),
  I(10,"responsibility","responsabilidad","responsabilit√©","Verantwortung"),
  I(10,"community","comunidad","communaut√©","Gemeinschaft"),
  I(10,"quality of life","calidad de vida","qualit√© de vie","Lebensqualit√§t"),
];

const HORA = [
  I(1,"one o'clock","la una","une heure","ein Uhr"),
  I(1,"two o'clock","las dos","deux heures","zwei Uhr"),
  I(1,"half past","y media","et demie","halb"),
  I(1,"quarter past","y cuarto","et quart","Viertel nach"),
  I(1,"quarter to","menos cuarto","moins le quart","Viertel vor"),
  I(1,"today","hoy","aujourd'hui","heute"),
  I(2,"tomorrow","ma√±ana","demain","morgen"),
  I(2,"yesterday","ayer","hier","gestern"),
  I(2,"morning","la ma√±ana","le matin","der Morgen"),
  I(2,"afternoon","la tarde","l'apr√®s-midi","der Nachmittag"),
  I(2,"evening","la noche","le soir","der Abend"),
  I(2,"weekend","el fin de semana","le week-end","das Wochenende"),
  I(3,"Monday","lunes","lundi","Montag"),
  I(3,"Tuesday","martes","mardi","Dienstag"),
  I(3,"Wednesday","mi√©rcoles","mercredi","Mittwoch"),
  I(3,"Thursday","jueves","jeudi","Donnerstag"),
  I(3,"Friday","viernes","vendredi","Freitag"),
  I(3,"Saturday","s√°bado","samedi","Samstag"),
  I(4,"Sunday","domingo","dimanche","Sonntag"),
  I(4,"appointment","cita","rendez-vous","Termin"),
  I(4,"to be on time","llegar a tiempo","√™tre √† l'heure","p√ºnktlich sein"),
  I(4,"to be late","llegar tarde","√™tre en retard","zu sp√§t sein"),
  I(4,"to wait","esperar","attendre","warten"),
  I(4,"to hurry up","darse prisa","se d√©p√™cher","sich beeilen"),
  I(5,"to plan","planificar","planifier","planen"),
  I(5,"schedule","horario","emploi du temps","Zeitplan"),
  I(5,"to organise","organizar","organiser","organisieren"),
  I(5,"to manage time","gestionar el tiempo","g√©rer son temps","Zeit einteilen"),
  I(5,"to set priorities","establecer prioridades","fixer des priorit√©s","Priorit√§ten setzen"),
  I(5,"deadline","fecha l√≠mite","date limite","Frist"),
  I(6,"to make an effort","esforzarse","faire des efforts","sich anstrengen"),
  I(6,"to be motivated","estar motivado","√™tre motiv√©","motiviert sein"),
  I(6,"to learn from mistakes","aprender de los errores","apprendre de ses erreurs","aus Fehlern lernen"),
  I(6,"responsibility","responsabilidad","responsabilit√©","Verantwortung"),
  I(6,"independence","independencia","ind√©pendance","Unabh√§ngigkeit"),
  I(6,"ultimate goal","objetivo final","objectif final","Endziel"),
  I(7,"to achieve","lograr","atteindre","erreichen"),
  I(7,"to improve","mejorar","am√©liorer","verbessern"),
  I(7,"to focus","concentrarse","se concentrer","sich konzentrieren"),
  I(7,"to take a break","tomar una pausa","faire une pause","eine Pause machen"),
  I(7,"to relax","relajarse","se d√©tendre","sich entspannen"),
  I(7,"to rest","descansar","se reposer","sich ausruhen"),
  I(8,"long-term","a largo plazo","√† long terme","langfristig"),
  I(8,"habit","h√°bito","habitude","Gewohnheit"),
  I(8,"to change habits","cambiar h√°bitos","changer d'habitudes","Gewohnheiten √§ndern"),
  I(8,"to reduce stress","reducir el estr√©s","r√©duire le stress","Stress reduzieren"),
  I(8,"well-being","bienestar","bien-√™tre","Wohlbefinden"),
  I(8,"to cope","afrontar","faire face","bew√§ltigen"),
  I(9,"to support others","apoyar a los dem√°s","soutenir les autres","andere unterst√ºtzen"),
  I(9,"to work together","trabajar juntos","travailler ensemble","zusammenarbeiten"),
  I(9,"to make a difference","marcar la diferencia","faire la diff√©rence","etwas bewirken"),
  I(9,"community","comunidad","communaut√©","Gemeinschaft"),
  I(9,"quality of life","calidad de vida","qualit√© de vie","Lebensqualit√§t"),
  I(9,"resilient","resiliente","r√©silient","resilient"),
  I(10,"ultimate goal","objetivo final","objectif final","Endziel"),
  I(10,"to achieve goals","lograr metas","atteindre des objectifs","Ziele erreichen"),
  I(10,"personal growth","crecimiento personal","d√©veloppement personnel","pers√∂nliches Wachstum"),
  I(10,"responsibility","responsabilidad","responsabilit√©","Verantwortung"),
  I(10,"self-discipline","autodisciplina","autodiscipline","Selbstdisziplin"),
  I(10,"independence","independencia","ind√©pendance","Unabh√§ngigkeit"),
];

const DIRECCIONES = [
  I(1,"left","izquierda","gauche","links"),
  I(1,"right","derecha","droite","rechts"),
  I(1,"straight on","todo recto","tout droit","geradeaus"),
  I(1,"near","cerca","pr√®s","nahe"),
  I(1,"far","lejos","loin","weit"),
  I(1,"here","aqu√≠","ici","hier"),
  I(2,"there","all√≠","l√†-bas","dort"),
  I(2,"corner","esquina","coin","Ecke"),
  I(2,"traffic lights","sem√°foros","feux","Ampel"),
  I(2,"roundabout","rotonda","rond-point","Kreisverkehr"),
  I(2,"crossing","cruce","passage","√úberweg"),
  I(2,"map","mapa","carte","Karte"),
  I(3,"to turn","girar","tourner","abbiegen"),
  I(3,"to cross","cruzar","traverser","√ºberqueren"),
  I(3,"to continue","continuar","continuer","weitergehen"),
  I(3,"to stop","parar","s'arr√™ter","anhalten"),
  I(3,"to ask","preguntar","demander","fragen"),
  I(3,"to explain","explicar","expliquer","erkl√§ren"),
  I(4,"bus stop","parada de autob√∫s","arr√™t de bus","Bushaltestelle"),
  I(4,"station","estaci√≥n","gare","Bahnhof"),
  I(4,"supermarket","supermercado","supermarch√©","Supermarkt"),
  I(4,"pharmacy","farmacia","pharmacie","Apotheke"),
  I(4,"post office","oficina de correos","poste","Post"),
  I(4,"bank","banco","banque","Bank"),
  I(5,"to get lost","perderse","se perdre","sich verlaufen"),
  I(5,"to find","encontrar","trouver","finden"),
  I(5,"to follow","seguir","suivre","folgen"),
  I(5,"to show","mostrar","montrer","zeigen"),
  I(5,"sign","se√±al","panneau","Schild"),
  I(5,"directions","direcciones","indications","Wegbeschreibung"),
  I(6,"pedestrian","peat√≥n","pi√©ton","Fu√üg√§nger"),
  I(6,"pedestrian street","calle peatonal","rue pi√©tonne","Fu√üg√§ngerzone"),
  I(6,"public transport","transporte p√∫blico","transports en commun","√∂ffentlicher Verkehr"),
  I(6,"to plan route","planificar la ruta","planifier l'itin√©raire","Route planen"),
  I(6,"to save time","ahorrar tiempo","gagner du temps","Zeit sparen"),
  I(6,"ultimate goal","objetivo final","objectif final","Endziel"),
  I(7,"to be careful","tener cuidado","faire attention","vorsichtig sein"),
  I(7,"dangerous","peligroso","dangereux","gef√§hrlich"),
  I(7,"safe","seguro","s√ªr","sicher"),
  I(7,"to avoid","evitar","√©viter","vermeiden"),
  I(7,"to reduce traffic","reducir el tr√°fico","r√©duire la circulation","Verkehr reduzieren"),
  I(7,"to improve","mejorar","am√©liorer","verbessern"),
  I(8,"advantages","ventajas","avantages","Vorteile"),
  I(8,"disadvantages","desventajas","inconv√©nients","Nachteile"),
  I(8,"to suggest","sugerir","sugg√©rer","vorschlagen"),
  I(8,"to recommend","recomendar","recommander","empfehlen"),
  I(8,"to take responsibility","asumir la responsabilidad","assumer la responsabilit√©","Verantwortung √ºbernehmen"),
  I(8,"to work together","trabajar juntos","travailler ensemble","zusammenarbeiten"),
  I(9,"to set priorities","establecer prioridades","fixer des priorit√©s","Priorit√§ten setzen"),
  I(9,"to manage time","gestionar el tiempo","g√©rer son temps","Zeit einteilen"),
  I(9,"to learn from mistakes","aprender de los errores","apprendre de ses erreurs","aus Fehlern lernen"),
  I(9,"resilient","resiliente","r√©silient","resilient"),
  I(9,"community","comunidad","communaut√©","Gemeinschaft"),
  I(9,"quality of life","calidad de vida","qualit√© de vie","Lebensqualit√§t"),
  I(10,"ultimate goal","objetivo final","objectif final","Endziel"),
  I(10,"to make a difference","marcar la diferencia","faire la diff√©rence","etwas bewirken"),
  I(10,"to support others","apoyar a los dem√°s","soutenir les autres","andere unterst√ºtzen"),
  I(10,"to achieve","lograr","atteindre","erreichen"),
  I(10,"long-term","a largo plazo","√† long terme","langfristig"),
  I(10,"responsibility","responsabilidad","responsabilit√©","Verantwortung"),
];

const ASIGNATURAS = [
  I(1,"maths","matem√°ticas","maths","Mathe"),
  I(1,"English","ingl√©s","anglais","Englisch"),
  I(1,"Irish","irland√©s","irlandais","Irisch"),
  I(1,"Spanish","espa√±ol","espagnol","Spanisch"),
  I(1,"history","historia","histoire","Geschichte"),
  I(1,"geography","geograf√≠a","g√©ographie","Erdkunde"),
  I(2,"science","ciencias","sciences","Naturwissenschaften"),
  I(2,"biology","biolog√≠a","biologie","Biologie"),
  I(2,"chemistry","qu√≠mica","chimie","Chemie"),
  I(2,"physics","f√≠sica","physique","Physik"),
  I(2,"music","m√∫sica","musique","Musik"),
  I(2,"art","arte","arts plastiques","Kunst"),
  I(3,"PE","educaci√≥n f√≠sica","EPS","Sport"),
  I(3,"technology","tecnolog√≠a","technologie","Technik"),
  I(3,"computer science","inform√°tica","informatique","Informatik"),
  I(3,"business","empresa","commerce","Wirtschaft"),
  I(3,"religion","religi√≥n","religion","Religion"),
  I(3,"home economics","econom√≠a dom√©stica","√©conomie familiale","Hauswirtschaft"),
  I(4,"timetable","horario","emploi du temps","Stundenplan"),
  I(4,"homework","deberes","devoirs","Hausaufgaben"),
  I(4,"project","proyecto","projet","Projekt"),
  I(4,"exam","examen","examen","Pr√ºfung"),
  I(4,"to study","estudiar","√©tudier","lernen"),
  I(4,"to revise","repasar","r√©viser","wiederholen"),
  I(5,"to choose subjects","elegir asignaturas","choisir des mati√®res","F√§cher w√§hlen"),
  I(5,"optional","optativo","optionnel","Wahlfach"),
  I(5,"compulsory","obligatorio","obligatoire","Pflicht"),
  I(5,"to concentrate","concentrarse","se concentrer","sich konzentrieren"),
  I(5,"to improve","mejorar","s'am√©liorer","sich verbessern"),
  I(5,"to practise","practicar","pratiquer","√ºben"),
  I(6,"stress","estr√©s","stress","Stress"),
  I(6,"pressure","presi√≥n","pression","Druck"),
  I(6,"confidence","confianza","confiance","Selbstvertrauen"),
  I(6,"to manage time","gestionar el tiempo","g√©rer son temps","Zeit einteilen"),
  I(6,"to set priorities","establecer prioridades","fixer des priorit√©s","Priorit√§ten setzen"),
  I(6,"ultimate goal","objetivo final","objectif final","Endziel"),
  I(7,"skills","habilidades","comp√©tences","F√§higkeiten"),
  I(7,"career","carrera","carri√®re","Karriere"),
  I(7,"future plans","planes de futuro","projets d'avenir","Zukunftspl√§ne"),
  I(7,"to prepare","prepararse","se pr√©parer","sich vorbereiten"),
  I(7,"to learn from mistakes","aprender de los errores","apprendre de ses erreurs","aus Fehlern lernen"),
  I(7,"responsibility","responsabilidad","responsabilit√©","Verantwortung"),
  I(8,"to be motivated","estar motivado","√™tre motiv√©","motiviert sein"),
  I(8,"to make an effort","esforzarse","faire des efforts","sich anstrengen"),
  I(8,"to achieve","lograr","atteindre","erreichen"),
  I(8,"to support others","apoyar a los dem√°s","soutenir les autres","andere unterst√ºtzen"),
  I(8,"to work together","trabajar juntos","travailler ensemble","zusammenarbeiten"),
  I(8,"to make a difference","marcar la diferencia","faire la diff√©rence","etwas bewirken"),
  I(9,"long-term","a largo plazo","√† long terme","langfristig"),
  I(9,"independence","independencia","ind√©pendance","Unabh√§ngigkeit"),
  I(9,"self-discipline","autodisciplina","autodiscipline","Selbstdisziplin"),
  I(9,"well-being","bienestar","bien-√™tre","Wohlbefinden"),
  I(9,"resilient","resiliente","r√©silient","resilient"),
  I(9,"quality of life","calidad de vida","qualit√© de vie","Lebensqualit√§t"),
  I(10,"ultimate goal","objetivo final","objectif final","Endziel"),
  I(10,"personal growth","crecimiento personal","d√©veloppement personnel","pers√∂nliches Wachstum"),
  I(10,"to set goals","ponerse metas","se fixer des objectifs","Ziele setzen"),
  I(10,"to improve","mejorar","am√©liorer","verbessern"),
  I(10,"to achieve goals","lograr metas","atteindre des objectifs","Ziele erreichen"),
  I(10,"responsibility","responsabilidad","responsabilit√©","Verantwortung"),
];

// Map theme -> items
const ITEMS_BY_THEME = {
  family: FAMILY,
  daily: DAILY,
  school: SCHOOL,
  yourself: YOURSELF,
  barrio: BARRIO,
  amigos: AMIGOS,
  comida: COMIDA,
  bebida: BEBIDA,
  uniforme: UNIFORME,
  casa: CASA,
  tiempo: TIEMPO,
  hora: HORA,
  direcciones: DIRECCIONES,
  asignaturas: ASIGNATURAS,
};

// ---------- Progress helpers ----------
const PROG_KEY = (lang, themeId)=> `jc_tower_prog::${lang}::${themeId}`;

function totalWordsForTheme(themeId){
  return (ITEMS_BY_THEME[themeId] || []).length;
}

export function maxLevelFor(lang, themeId){
  // always 10, but keep safe if you edit later:
  const arr = ITEMS_BY_THEME[themeId] || [];
  return Math.max(1, ...arr.map(x=>x.lvl||1));
}

export function themeProgress(lang, themeId){
  const raw = JSON.parse(localStorage.getItem(PROG_KEY(lang, themeId)) || "{}");
  const level = raw.level ?? 1;
  const cleared = raw.cleared ?? 0;
  const total = totalWordsForTheme(themeId);
  const maxLevel = maxLevelFor(lang, themeId);
  const pct = total ? Math.round((cleared/total)*100) : 0;
  return { level, cleared, total, maxLevel, pct };
}

export function saveProgress(lang, themeId, patch){
  const cur = JSON.parse(localStorage.getItem(PROG_KEY(lang, themeId)) || "{}");
  localStorage.setItem(PROG_KEY(lang, themeId), JSON.stringify({ ...cur, ...patch }));
}

export function resetProgress(lang, themeId){
  localStorage.removeItem(PROG_KEY(lang, themeId));
}

export function resetAll(){
  for(const lang of ["es","fr","de","en"]){
    for(const t of THEME_LIST){
      localStorage.removeItem(PROG_KEY(lang, t.id));
    }
  }
}

export function overallProgress(lang){
  let total=0, cleared=0;
  for(const t of THEME_LIST){
    const tp = themeProgress(lang, t.id);
    total += tp.total;
    cleared += tp.cleared;
  }
  const pct = total ? Math.round((cleared/total)*100) : 0;
  return { total, cleared, pct };
}

// ---------- Level building ----------
// Normal level: items where item.lvl === level
// Mix level: pool from previous 3 levels (deduped by first answer)
export function getLevelEntries(lang, themeId, level, isMix){
  const all = ITEMS_BY_THEME[themeId] || [];

  const getAnswers = (it)=>{
    if(lang === "es") return it.es;
    if(lang === "fr") return it.fr;
    if(lang === "de") return it.de;
    return it.enAns || [it.en];
  };

  let pool = [];
  if(!isMix){
    pool = all.filter(it => (it.lvl||1) === level).map(it=>({ en: it.en, answers: getAnswers(it) }));
  }else{
    const from = Math.max(1, level-3);
    pool = all.filter(it => (it.lvl||1) >= from && (it.lvl||1) < level)
      .map(it=>({ en: it.en, answers: getAnswers(it) }));

    const seen = new Set();
    pool = pool.filter(it=>{
      const k = (it.answers?.[0] || it.en || "").toLowerCase();
      if(seen.has(k)) return false;
      seen.add(k);
      return true;
    });
  }

  return pool;
}
